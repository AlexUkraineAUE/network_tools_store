<!DOCTYPE html>
<html class="has-navbar-fixed-top">
  <head>
    <title><%= yield(:html_title) + "-" if content_for?(:html_title)  %> WinnipegTelecom Network Tools </title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_importmap_tags %>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css">
    <script src="https://js.stripe.com/v3"></script>
  </head>

  <body>
    <header>
    <%= render 'common/menu' %>
    </header>
    <main>
      <section>
        <%= link_to image_tag("cart.jpg", width: 60), root_path%>
        <details>
          <summary>
            Cart 
            <% if cart.present?%>
              <sup><%= cart.size%></sup>
            <% end %>
          </summary>
          <% if cart.present?%>  
            <ul>
              <% cart.each do |product|%>
              <li>
              <%= product.name%> <%= button_to "❌", cart_path(product), method: :delete%>
              </li>
              <% end %>
            </ul>
            <% else %>
              <p>No items in the cart.</p>
          <% end%>
        </details>
      </section>
      <% if flash[:notice] %>
          <p>
            <%= flash[:notice] %>
          </p>
        <% end %>
    <%= yield %>
    </main>
  </body>
</html>